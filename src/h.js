export default function h(name, attributes) {
    var rest = []
    var children = []
    var length = arguments.length

    while (length-- > 2) rest.push(arguments[length])

    while (rest.length) {
        var node = rest.pop()
        if (node && node.pop) {
            for (length = node.length; length--; ) {
                rest.push(node[length])
            }
        } else if (node != null && node !== true && node !== false) {
            children.push(node)
        }
    }

    return typeof name === "function"
        ? name(attributes || {}, children)
        : {
            nodeName: name,
            attributes: attributes || {},
            children: children,
            key: attributes && attributes.key
        }
}

