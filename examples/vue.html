<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vmarked</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/github-markdown-css/2.10.0/github-markdown.min.css">

    <script src="//cdn.bootcss.com/vue/2.5.16/vue.js"></script>
    <script src="../dist/vmarked.js"></script>

    <style>
        .markdown-container{
            width: 600px;
            margin: 0 auto;
            margin-top: 30px;
        }

        #markdown-text {
            margin-top: 30px;
            width: 100%;
            margin-bottom: 30px;
        }
    </style>

    <script type="text/html" id="markdown-template">
# 标题<div class="my-list">====</div>
<i class="icon-list"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落
<i class="icon-chevron-sign-left"></i> 视图：互换左边编辑区和右边预览区的位置
<i class="icon-adjust"></i> 主题：内置了黑白两种模式的主题，试试 **黑色主题**，超炫！
<i class="icon-desktop"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验
<i class="icon-fullscreen"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境

    </script>
</head>
<body>



<div class="markdown-container">
    <textarea name="" id="markdown-text" cols="30" rows="10">
    </textarea>


    <div class="vnodes-container">
        <pre><code id="vnodes-container"></code></pre>
    </div>


    <div class="preview-container">
        <div id="app"></div>
    </div>


</div>




<script>
    // const { h } = snabbdom;

    // vmarked.setOptions({
    //     h: h
    // });
    var vnodes = [];
    var template =  '# aaaa \n <div class="icon-share"></div>';
    template = document.getElementById('markdown-template').innerHTML;
    var markdownTextContainer = document.getElementById('markdown-text');
    function getMarkdownText(){
        return markdownTextContainer.value;
    }

    markdownTextContainer.value = template;
    markdownTextContainer.addEventListener('keyup', function () {
        vnodes = vmarked(markdownTextContainer.value);
        app.$forceUpdate();
    });

    vnodes = vmarked(template);


    var app = new Vue({
        el: '#app',
        render(h) {

            // var el =  h('div',{
            //     'class': {
            //         foo: true,
            //         bar: false
            //     },
            //     style: {
            //         color: 'red',
            //         fontSize: '14px'
            //     },
            //     attrs: {
            //         id: 'foo'
            //     },
            //     props: {
            //         myProp: 'bar'
            //     }
            //
            // },'123');
            //
            // console.log(el);

            console.log(vnodes);
            var el = h('div',{
                'class': {
                    'markdown-body': true
                }
            },vnodes);
            //
            console.log(el);

            return el
        }
    });



</script>

</body>
</html>